var __awaiter=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function n(e){try{o(u.next(e))}catch(e){t(e)}}function r(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}o((u=u.apply(i,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function sleep(t){return new Promise(function(e){return setTimeout(e,t)})}var Point=function(e,t,n,r){void 0===r&&(r=1),this.x=e,this.y=t,this.color=n,this.size=r},Frame=function(){function e(e){this.frame=e}return e.prototype.append=function(e){this.frame.push(e)},e}(),Color=function(){function r(e){this.color=e}return r.fromRGB=function(e,t,n){return new r("rgb("+e+","+t+","+n+")")},r}(),Canvas=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.id=e,this.w=t,this.h=n}return e.prototype.create=function(){var e=document.createElement("canvas");return e.id=this.id,e.setAttribute("height",this.h.toString()),e.setAttribute("width",this.w.toString()),e.style.border="solid 2px black",document.body.appendChild(e),document.getElementById(e.id)},e.prototype.self=function(){return document.querySelector("#"+this.id)},e.prototype.draw=function(e){for(var t=this.self().getContext("2d"),n=0,r=e.frame;n<r.length;n++){var o=r[n];t.beginPath(),t.fillStyle=o.color,t.fillRect(o.x,o.y,o.size,o.size),t.closePath()}return this.last=e},e.prototype.render=function(n,e){var r,o=1e3/e,i=Date.now(),a=this;this.mouse={x:0,y:0},this.handleMouse=function(e){var t=a.self().getBoundingClientRect();a.mouse={x:e.clientX-t.left,y:e.clientY-t.top},a.mouse.x=a.mouse.x>a.w?a.w:a.mouse.x,a.mouse.y=a.mouse.y>a.h?a.h:a.mouse.y,a.mouse.x=a.mouse.x<0?0:a.mouse.x,a.mouse.y=a.mouse.y<0?0:a.mouse.y},window.addEventListener("mousemove",this.handleMouse,!1),a.isRendering=!0,a.raf=window.requestAnimationFrame(function t(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return a.clearAll(),r=Date.now()-i,i=Date.now(),n(r/1e3),r<o?[4,sleep(o-r)]:[3,2];case 1:e.sent(),e.label=2;case 2:return a.raf=window.requestAnimationFrame(t),[2]}})})})},e.prototype.stopRender=function(){if(this.isRendering){try{window.cancelAnimationFrame(this.raf)}catch(e){return!1}return this.isRendering=!1,window.removeEventListener("mousemove",this.handleMouse),!0}return!1},e.prototype.clear=function(e){for(var t=this.self().getContext("2d"),n=0,r=e.frame;n<r.length;n++){var o=r[n];t.clearRect(o.x,o.y,o.size,o.size)}return!0},e.prototype.clearLast=function(){if(null!=this.last){for(var e=this.self().getContext("2d"),t=0,n=this.last.frame;t<n.length;t++){var r=n[t];e.clearRect(r.x,r.y,r.size,r.size)}return!0}},e.prototype.clearAll=function(){return this.self().getContext("2d").clearRect(0,0,this.self().width,this.self().height),!0},e}();function rand(e){return Math.floor(Math.random()*e)}function generateVector(){var e,t,n,r,o=rand(4);return 0==o?(e=-1,t=rand(window.innerHeight),n=Math.abs(Math.random())+PLUS_VEL,r=(2*Math.random()-1)*PLUS_VEL*2):1==o?(e=window.innerWidth+1,t=rand(window.innerHeight),n=-1*(Math.abs(Math.random())+PLUS_VEL),r=(2*Math.random()-1)*PLUS_VEL*2):2==o?(e=rand(window.innerWidth),t=-1,n=(2*Math.random()-1)*PLUS_VEL*2,r=Math.abs(Math.random())+PLUS_VEL):(e=rand(window.innerWidth),t=window.innerHeight+1,n=(2*Math.random()-1)*PLUS_VEL*2,r=-1*(Math.abs(Math.random())+PLUS_VEL)),{x:e,y:t,xd:n,yd:r}}function exist4d(e,t){for(var n,r,o=0,i=e;o<i.length;o++){var a=i[o];for(n in r=0,a){if(t[n]!=a[n])break;r++}if(4==r)return!0}return!1}function main(){var c=MAX_LINE_LENGTH/MIN_LINE_LENGTH,d=Color.fromRGB(PR,PG,PB).color,f=new Canvas("main",window.innerWidth,window.innerHeight);f.create();var e=f.self();e.style.backgroundColor=Color.fromRGB(R,G,B).color,e.style.border="0px",e.style.resize="both",document.body.style.overflow="hidden",document.body.style.margin="0px",window.addEventListener("resize",function(){f.w=window.innerWidth,f.h=window.innerHeight,e.style.width=f.w.toString(),e.style.height=f.h.toString()});for(var y=[],t=0;t<POINTS;t++)y.push(generateVector());var w,m,_=new Frame([]),p=f.self().getContext("2d");p.lineWidth=LINE_WIDTH,f.render(function(e){_.frame=[],m=[];for(var t=0,n=y;t<n.length;t++){var r=n[t];if(r.x+=r.xd,r.y+=r.yd,r.x+150<0&&r.xd<0||r.x-150>f.w&&0<r.xd||r.y+150<0&&r.yd<0||r.y-150>f.h&&0<r.yd){var o=y.indexOf(r,0);-1<o&&y.splice(o,1),y.push(generateVector())}else{_.frame.push(new Point(r.x,r.y,d,POINT_SIZE));for(var i=0,a=y;i<a.length;i++){var s=a[i];if(s.x!==r.x||s.y!==r.y){if(AVOID_DOUBLE_LINES){if(exist4d(m,[s.x,s.y,r.x,r.y]))continue;m.push([r.x,r.y,s.x,s.y])}var u=s.x-r.x,l=s.y-r.y,h=Math.sqrt(Math.pow(u,2)+Math.pow(l,2));if(h<MIN_LINE_LENGTH)w=Color.fromRGB(TO_R,TO_G,TO_B);else{if(!(h<=MAX_LINE_LENGTH))continue;w=new Color("rgba("+TO_R+","+TO_G+","+TO_B+", "+h*c+")")}p.beginPath(),p.moveTo(r.x+POINT_SIZEBY2,r.y+POINT_SIZEBY2),p.lineTo(s.x+POINT_SIZEBY2,s.y+POINT_SIZEBY2),p.closePath(),p.strokeStyle=w.color,p.stroke()}}}}f.draw(_)},FPS)}var FPS=60,PLUS_VEL=1.5,LINE_WIDTH=.125,POINTS=100,POINT_SIZE=2,POINT_SIZEBY2=POINT_SIZE/2,MAX_LINE_LENGTH=125,MIN_LINE_LENGTH=25,AVOID_DOUBLE_LINES=!1,R=64..toString(),G=127..toString(),B=255..toString(),TO_R=255,TO_G=255,TO_B=255,PR=TO_R,PG=TO_G,PB=TO_B;document.body.onload=main;
